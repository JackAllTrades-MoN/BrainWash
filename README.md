# Brainwash

BrainwashはBrainfu*kベースのシンプルなプログラミング言語です。シンプルながら最先端の理論研究の成果を反映しており、特にその特異性や既得権益への影響の大きさから、通常の科学者たちが認めようとしない超科学的成果を多く取り込んだ、まさにポスト科学とでも言うべき画期的なプログラミング言語です。特に、水からの伝言[1]、量子テレポーテーション、波動なんとかに強い思想上の影響を受けています。

Brainwashの処理系は
- プログラム
	- 後述するinstructionの列
- インストラクションポインタ(ip)
	- 現在実行中のプログラム位置をさす
- バイト配列(memory)
	- 各要素は0で初期化される
- データポインタ(dp)
	- 現在参照されているmemoryの位置
- 入力/出力用のバイトストリーム(stdin, stdout)

からなります。「ありがとう」や「名勝の水」のような綺麗な言葉をかけながら凍らせた水は綺麗な形の結晶を作り、「バカヤロウ」や「水道水」などの言葉をかけながら作った氷は形の悪い結晶を作る[1]ことが知られています。Brainwashでも、「ありがとう」と言葉をかけることで、ipの値が1増え、逆に「バカヤロウ」と声をかけるとipの値が1減ってしまいます。「よ、名勝の水」などと声をかければ、現在ipがさしているmemoryの要素の値が+1され、「お前、この、水道水」などと心無い言葉をかければmemoryの値は-1されることでしょう。

また、特別な装置や才覚がないと人間が発する生物本来の波動がわからないのと同じように、計算結果の出力や外部からの入力ができなければ計算ができても意味がありません。安心してください。Brainwashでは特別な修行や霊薬(MDMA)などなしに波動を観測できます。「波動を測定」と呟いてみてください。標準入力から1バイトを読み込んで、memory中のdpが今指している番地に値を格納します。逆に「波動を出力」と打てば現在dpが指している番地の１バイト値を標準出力に書き出します。

さて、プログラミング言語をチューリング完全にするには、まだ何か足りませんね。はい、そうです。ループやifが書けると嬉しいですね。2つのinstruction「量」と「子」はこのために用意されています。ipがプログラム中の「量」にたどり着いた時、もし現在dpが指している値が0であればそのinstruction以降のもっとも近い「子」の次の命令までテレポートします。0以外であれば通常通り次のinstructionに進みます。また、「子」にたどり着いた時、参照している値が0以外であった場合、直前の「量」の次の行までテレポートし、0であった場合は、そのまま次の命令に進みます。もう、お分かりですね、これが量子テレポーテーションです。

さて、これでどのように計算を行えば良いのでしょうか？
簡単な例をみてみましょう。以下は、標準入力から与えられた二つの整数を足し合わせるプログラムです:

```
「programs/looptest.bw」
m+nの計算。// このように決められた単語以外はコメントになるため、自然にコメントが記述できます。
波動を測定。// 標準入力から1バイトのデータ(m)を、dpがさす場所に読み込む。
ありがとう。// dpを1加算。
波動を測定。// nを入力。
「量」// もし0ならばスキップ。
バカヤロウ。//mの格納されている番地へ。
名勝の水。//m++。
ありがとう。//nの格納されている番地へ。
水道水。//n--。
「子」//もし0以外ならば戻る。
バカヤロウ。//mの格納されている番地(結果)へ。
波動を出力。//結果を出力して終わり。
```

試しに10, 20を入力してみましょう。
プログラムが正しくかけていれば、30が帰ってくるはずです。

## 実行方法
- Stackを使ってhaskellをインストールしてください。
- 以下のコマンドを実行してください:
```
stack run ./path/to/your/program.bw
```

上にあげたm+nのプログラムなどのサンプルは./programs以下に格納されています。

## 文法

```
 (program)     p ::= pdi
 (delimiter)   d ::= COMMA | PERIOD | LP | RP
 (instruction) i ::= PInc    | PDec
                   | VInc    | VDec
                   | PutChar | GetChar
                   | JumpL   | JumpR
                   | Exit    | Comment
```

| 抽象構文 (AST) | 具象構文 (concrete syntax) | 意味 (semantics) |
|:-----------|:-------:|:------------:|
| PInc | ありがとう | brainfu*kの> |
| PDec | バカヤロウ | brainfu*kの< |
| VInc | 名勝の水 | brainfu*kの+ |
| VDec | 水道水 | brainfu*kの- |
| PutChar | 波動を出力 | brainfu*kの. |
| GetChar | 波動を観測 | brainfu*kの, |
| JumpL | 量 | brainfu*kの[ |
| JumpR | 子 | brainfu*kの] |
| Exit | アセンション | プログラムの実行を終了する |
| Comment | *その他あらゆる文章 | 実行時は無視されるコメント |
| COMMA | 、 | デリミタ |
| PERIOD | 。 | デリミタ |
| LP | 「 | デリミタ |
| RP | 」 | デリミタ |



## 参考文献
[1] 『水からの伝言 世界初!!水の氷結結晶写真集』波動教育社、1999年6月。ISBN 4-939098-00-1。


> Written with [StackEdit](https://stackedit.io/).
